### Tuiles des pièces ###

tuiles-pieces:
  variables:
    var_largeur: "60%"
    var_thermostat_sinope: false
    var_thermostat_sensibo: false
    var_temperature: false
    var_humidite: false
    
    var_ent01: false
    var_ent02: false
    var_ent03: false
    var_ent04: false
    var_ent05: false
    var_ent06: false
    
    var_ent01_etat_actif: "on"   
    var_ent02_etat_actif: "on"   
    var_ent03_etat_actif: "on"   
    var_ent04_etat_actif: "on"   
    var_ent05_etat_actif: "on"   
    var_ent06_etat_actif: "on"  
    
    var_ent01_etat_inactif: "off"  
    var_ent02_etat_inactif: "off"   
    var_ent03_etat_inactif: "off"   
    var_ent04_etat_inactif: "off"   
    var_ent05_etat_inactif: "off"   
    var_ent06_etat_inactif: "off"   
    
    var_alert01: false
    var_alert02: false
    var_alert03: false
    var_alert04: false
    var_alert05: false
    var_alert06: false

    var_alert01_etat: ""  
    var_alert02_etat: ""  
    var_alert03_etat: ""  
    var_alert04_etat: ""  
    var_alert05_etat: ""  
    var_alert06_etat: ""  

    var_ent01_icone: ""
    var_ent02_icone: ""
    var_ent03_icone: ""
    var_ent04_icone: ""
    var_ent05_icone: ""
    var_ent06_icone: ""

    var_alert01_icone_on: ""
    var_alert01_icone_off: ""
    var_alert02_icone_on: ""
    var_alert02_icone_off: ""
    var_alert03_icone_on: ""
    var_alert03_icone_off: ""
    var_alert04_icone_on: ""
    var_alert04_icone_off: ""
    var_alert05_icone_on: ""
    var_alert05_icone_off: ""
    var_alert06_icone_on: ""
    var_alert06_icone_off: ""

  icon: '[[[ return variables.var_icone ]]]'
  name: '[[[ return variables.var_nom_piece ]]]'
  tap_action:
    action: navigate
    navigation_path: '[[[ return variables.var_path ]]]'
  styles:
    card:
      - height: 170px
      - font-size: 13px
    icon:
      - width: '[[[ return variables.var_largeur ]]]'
      - margin-left: "-2%"
      - margin-top: 25%
      - color: "#0099cc"
    name:
      - text-transform: uppercase
      - letter-spacing: 0.3em
      - font-familly: AppleGothic #cursive
      - justify-self: center
      - padding: 0px 5px
      - font-size: 15px
    grid:
      - position: relative
    custom_fields:
    
      chauffage:
        - color: |
            [[[
              if (states[[[[ variables.var_thermostat ]]]].state == "heating")
                return "#FFFF00";
              if (states[[[[ variables.var_thermostat ]]]].state == "heat")
                return "#FFFF00";
              if (states[[[[ variables.var_thermostat ]]]].state == "cool")
                return "#00ccff";
              return "#798081";
            ]]]
        - position: absolute
        - left: 5%
        - top: 0%
        - width: 23px
        - height: 23px
        
      temperature:
        - position: absolute
        - left: 20%
        - top: 1%
        
      humidite:
        - position: absolute
        - left: 52%
        - top: 1%

# Entitées  
      ent01:
        - color: |
            [[[
              if (states[[[[ variables.var_ent01 ]]]].state == [[[ variables.var_ent01_etat_inactif ]]] )
                return "#16B84E";   
              else 
                if (states[[[[ variables.var_ent01 ]]]].state == [[[ variables.var_ent01_etat_actif ]]] )
                   return "#FFFF00";  
                else
                   return "#ff0000";  
            ]]]
        - position: absolute
        - left: 83%
        - top: 0%
        - width: 23px
        - height: 23px
        
      ent02:
        - color: |
            [[[
              if (states[[[[ variables.var_ent02 ]]]].state == [[[ variables.var_ent02_etat_inactif ]]] )
                return "#16B84E";   
              else 
                if (states[[[[ variables.var_ent02 ]]]].state == [[[ variables.var_ent02_etat_actif ]]] )
                   return "#FFFF00";  
                else
                   return "#ff0000";  
            ]]]
        - position: absolute
        - left: 83%
        - top: 19%
        - width: 23px
        - height: 23px
        
      ent03:
        - color: |
            [[[
              if (states[[[[ variables.var_ent03 ]]]].state == [[[ variables.var_ent03_etat_inactif ]]] )
                return "#16B84E";   
              else 
                if (states[[[[ variables.var_ent03 ]]]].state == [[[ variables.var_ent03_etat_actif ]]] )
                   return "#FFFF00";  
                else
                   return "#ff0000";  
            ]]]
        - position: absolute
        - left: 83%
        - top: 35%
        - width: 23px
        - height: 23px
        
      ent04:
        - color: |
            [[[
              if (states[[[[ variables.var_ent04 ]]]].state == [[[ variables.var_ent04_etat_inactif ]]] )
                return "#16B84E";   
              else 
                if (states[[[[ variables.var_ent04 ]]]].state == [[[ variables.var_ent04_etat_actif ]]] )
                   return "#FFFF00"; 
                else
                   return "#ff0000"; 
            ]]]
        - position: absolute
        - left: 83%
        - top: 53%
        - width: 23px
        - height: 23px
        
      ent05:
        - color: |
            [[[
              if (states[[[[ variables.var_ent05 ]]]].state == [[[ variables.var_ent05_etat_inactif ]]] )
                return "#16B84E";   
              else 
                if (states[[[[ variables.var_ent05 ]]]].state == [[[ variables.var_ent05_etat_actif ]]] )
                   return "#FFFF00";  
                else
                   return "#ff0000";  
            ]]]
        - position: absolute
        - left: 83%
        - top: 70%
        - width: 23px
        - height: 23px
        
      ent06:
        - color: |
            [[[
              if (states[[[[ variables.var_ent06 ]]]].state == [[[ variables.var_ent06_etat_inactif ]]] )
                return "#16B84E";   
              else 
                if (states[[[[ variables.var_ent06 ]]]].state == [[[ variables.var_ent06_etat_actif ]]] )
                   return "#FFFF00";  
                else
                   return "#ff0000";  
            ]]]
        - position: absolute
        - left: 83%
        - top: 87%
        - width: 23px
        - height: 23px
        
# Alertes        
      alerte01:
        - color: |
            [[[
              if (states[[[[ variables.var_alert01 ]]]].state == [[[ variables.var_alert01_etat ]]])
                return "#FF0000";
              return "#16B84E";
            ]]]
        - position: absolute
        - left: 7%
        - top: 17%
        - width: 23px
        - height: 23px
        
      alerte02:
        - color: |
            [[[
              if (states[[[[ variables.var_alert02 ]]]].state == [[[ variables.var_alert02_etat ]]])
                return "#FF0000";
              return "#16B84E";
            ]]]
        - position: absolute
        - left: 20%
        - top: 17%
        - width: 23px
        - height: 23px

      alerte03:
        - color: |
            [[[
              if (states[[[[ variables.var_alert03 ]]]].state == [[[ variables.var_alert03_etat ]]])
                return "#FF0000";
              return "#16B84E";
            ]]]
        - position: absolute
        - left: 32%
        - top: 17%
        - width: 23px
        - height: 23px
      
      alerte04:
        - color: |
            [[[
              if (states[[[[ variables.var_alert04 ]]]].state == [[[ variables.var_alert04_etat ]]])
                return "#FF0000";
              return "#16B84E";
            ]]]
        - position: absolute
        - left: 45%
        - top: 17%
        - width: 23px
        - height: 23px
      
      alerte05:
        - color: |
            [[[
                if (states[[[[ variables.var_alert05 ]]]].state == [[[ variables.var_alert05_etat ]]])
                return "#FF0000";
              return "#16B84E";
            ]]]
        - position: absolute
        - left: 57%
        - top: 17%
        - width: 23px
        - height: 23px
      
      alerte06:
        - color: |
            [[[
              if (states[[[[ variables.var_alert06 ]]]].state == [[[ variables.var_alert06_etat ]]])
                return "#FF0000";
              return "#16B84E";
            ]]]
        - position: absolute
        - left: 69%
        - top: 17%
        - width: 23px
        - height: 23px
      
  custom_fields:
  
    chauffage: |
      [[[
       if (variables.var_thermostat_sinope) {
       
         if (states[[[[ variables.var_thermostat ]]]].state == "heating")
            return `<ha-icon
                    icon="mdi:radiator"
                    </ha-icon>`;
         else            
            return `<ha-icon
                    icon="mdi:radiator-disabled"
                    </ha-icon>`;
       }                    

       if (variables.var_thermostat_sensibo) {
       
         if (states[[[[ variables.var_thermostat ]]]].state == "heat")
            return `<ha-icon
                    icon="mdi:fire"
                    </ha-icon>`;
         else               
           if (states[[[[ variables.var_thermostat ]]]].state == "cool")
             return `<ha-icon
                     icon="mdi:snowflake"
                     </ha-icon>`;
           else            
             return `<ha-icon
                     icon="mdi:hvac-off"
                     </ha-icon>`;
       }
      ]]]
      
    temperature: |
      [[[
        return `<ha-icon
          icon="mdi:thermometer"
          style="width: 15px; height: 15px; color: deepskyblue;">     
          </ha-icon><span><span style="color: var(--text-color-sensor);">${states[[[[ variables.var_temperature ]]]].state}°C</span></span>`
      ]]]
      
    humidite: |
      [[[
        return `<ha-icon
          icon="mdi:water-percent"
          style="width: 15px; height: 15px; color: deepskyblue;">
          </ha-icon><span><span style="color: var(--text-color-sensor);">${states[[[[ variables.var_humidite ]]]].state}%</span></span>`
      ]]]
      
    alerte01: |
      [[[
        if (variables.var_alert01) {

          if (states[[[[ variables.var_alert01 ]]]].state == [[[ variables.var_alert01_etat ]]] )
              return `<ha-icon
                       icon="${variables.var_alert01_icone_off}"
                       style="width: 20px; height: 20px"
                       </ha-icon>`;
          else            
              return `<ha-icon
                      icon="${variables.var_alert01_icone_on}"
                      style="width: 20px; height: 20px"
                      </ha-icon>`;
        }   
      ]]]

    alerte02: |
      [[[
        if (variables.var_alert02) {

          if (states[[[[ variables.var_alert02 ]]]].state == [[[ variables.var_alert02_etat ]]] )
              return `<ha-icon
                       icon="${variables.var_alert02_icone_off}"
                       style="width: 20px; height: 20px"
                       </ha-icon>`;
          else            
              return `<ha-icon
                      icon="${variables.var_alert02_icone_on}"
                      style="width: 20px; height: 20px"
                      </ha-icon>`;
        }   
      ]]]

    alerte03: |
      [[[
        if (variables.var_alert03) {

          if (states[[[[ variables.var_alert03 ]]]].state == [[[ variables.var_alert03_etat ]]] )
              return `<ha-icon
                       icon="${variables.var_alert03_icone_off}"
                       style="width: 20px; height: 20px"
                       </ha-icon>`;
          else            
              return `<ha-icon
                      icon="${variables.var_alert03_icone_on}"
                      style="width: 20px; height: 20px"
                      </ha-icon>`;
        }   
      ]]]

    alerte04: |
      [[[
        if (variables.var_alert04) {

          if (states[[[[ variables.var_alert04 ]]]].state == [[[ variables.var_alert04_etat ]]] )
              return `<ha-icon
                       icon="${variables.var_alert04_icone_off}"
                       style="width: 20px; height: 20px"
                       </ha-icon>`;
          else            
              return `<ha-icon
                      icon="${variables.var_alert04_icone_on}"
                      style="width: 20px; height: 20px"
                      </ha-icon>`;
        }   
      ]]]

    alerte05: |
      [[[
        if (variables.var_alert05) {

          if (states[[[[ variables.var_alert05 ]]]].state == [[[ variables.var_alert05_etat ]]] )
              return `<ha-icon
                       icon="${variables.var_alert05_icone_off}"
                       style="width: 20px; height: 20px"
                       </ha-icon>`;
          else            
              return `<ha-icon
                      icon="${variables.var_alert05_icone_on}"
                      style="width: 20px; height: 20px"
                      </ha-icon>`;
        }   
      ]]]

    alerte06: |
      [[[
        if (variables.var_alert06) {

          if (states[[[[ variables.var_alert06 ]]]].state == [[[ variables.var_alert06_etat ]]] )
              return `<ha-icon
                       icon="${variables.var_alert06_icone_off}"
                       style="width: 20px; height: 20px"
                       </ha-icon>`;
          else            
              return `<ha-icon
                      icon="${variables.var_alert06_icone_on}"
                      style="width: 20px; height: 20px"
                      </ha-icon>`;
        }   
      ]]]
      
    ent01: |
      [[[
        if (variables.var_ent01) {
          return `<ha-icon
                  icon="${variables.var_ent01_icone}"
                  </ha-icon>`
        }   
      ]]]
      
    ent02: |
      [[[
        if (variables.var_ent02) {
          return `<ha-icon
                  icon="${variables.var_ent02_icone}"
                  </ha-icon>`
        }   
      ]]]
      
    ent03: |
      [[[
        if (variables.var_ent03) {
          return `<ha-icon
                  icon="${variables.var_ent03_icone}"
                  </ha-icon>`
        }   
      ]]]
      
    ent04: |
      [[[
        if (variables.var_ent04) {
          return `<ha-icon
                  icon="${variables.var_ent04_icone}"
                  </ha-icon>`
        }   
      ]]]
      
    ent05: |
      [[[
        if (variables.var_ent05) {
          return `<ha-icon
                  icon="${variables.var_ent05_icone}"
                  </ha-icon>`
        }   
      ]]]
      
    ent06: |
      [[[
        if (variables.var_ent06) {
          return `<ha-icon
                  icon="${variables.var_ent06_icone}"
                  </ha-icon>`
        }   
      ]]]
      
  card_mod:
    style: |
      ha-card {
       margin-left: auto;
       margin-right: auto;
      }
